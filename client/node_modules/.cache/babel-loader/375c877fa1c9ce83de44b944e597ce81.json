{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alens\\\\OneDrive\\\\Radna povr\\u0161ina\\\\Novi materijali\\\\diplomski react node sql\\\\client\\\\src\\\\components\\\\UploadGraph\\\\Upload.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport './mystyle.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MyBody(props) {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const [isFileSubmitted, setIsFileSubmitted] = useState(false);\n  const [selectedHeaders, setSelectedHeaders] = useState();\n  const [isHeaderPicked, setIsHeaderPicked] = useState(false);\n  const [isGraphDone, setIsGraphDone] = useState(false);\n  const [isInput, setIsInput] = useState(true);\n  const [LinkOfGraph, setLinkOfGraph] = useState(process.env.REACT_APP_SRVR_URL + \":\" + process.env.REACT_APP_SRVR_PORT + \"/graph\");\n  const [iFrameLink, setIframeLink] = useState(false);\n  const [chosenGrapha, setChosenGraph] = useState();\n  const d = new Date();\n  let chosenVariables = [];\n  let typesGraphicons = ['Linijski grafikon', 'Histogram', 'Box plot', 'Scatter plot', 'Bar plot', 'Heat map'];\n  let chosenGraph = -1;\n  let lastId = \"\";\n\n  const changeHandler = event => {\n    setSelectedFile(event.target.files[0]);\n    console.log(event.target.files[0]);\n    setIsFilePicked(true);\n  }; //uploading csv to server\n\n\n  const handleSubmission = () => {\n    console.log(\"handleUpload started\");\n    const data = new FormData();\n    data.append('file', selectedFile);\n    axios.post(process.env.REACT_APP_SRVR_URL + \":\" + process.env.REACT_APP_SRVR_PORT + \"/upload\", data, {}).then(res => {\n      console.log(res.statusText);\n    });\n    submit();\n    setIsFileSubmitted(true);\n  }; //getHeaders from selectedfile csv\n\n\n  const submit = () => {\n    const file = selectedFile;\n    const reader = new FileReader();\n\n    reader.onload = function (e) {\n      const text = e.target.result;\n      console.log(text);\n      processCsv(text);\n    };\n\n    reader.readAsText(file);\n  };\n\n  const processCsv = (str, delim = \",\") => {\n    setSelectedHeaders(str.slice(0, str.indexOf('\\r\\n')).split(delim));\n    setIsHeaderPicked(true);\n    console.log(selectedHeaders);\n  };\n\n  const saveChosenVariables = (e, ew) => {\n    if (chosenVariables.indexOf(e) === -1) {\n      chosenVariables.push(e);\n      ew.target.classList.remove(\"button-nonselectedvar\");\n      ew.target.classList.add(\"button-selectedvar\");\n      console.log(ew);\n      console.log(chosenVariables);\n    } else if (chosenVariables.indexOf(e) !== -1) {\n      chosenVariables.splice(chosenVariables.indexOf(e), 1);\n      ew.target.classList.remove(\"button-selectedvar\");\n      ew.target.classList.add(\"button-nonselectedvar\");\n      console.log(chosenVariables);\n    }\n  }; //Date.now() + '-' + file.originalname\n  //putting csvfile name in database\n\n\n  const handleDatabase = () => {\n    console.log(\"handleDB started\");\n    let csvName = d.getDate() + '-' + (d.getMonth() + 1) + '-' + selectedFile.name;\n    axios.post(process.env.REACT_APP_SRVR_URL + \":\" + process.env.REACT_APP_SRVR_PORT + \"/list\", {\n      csvname: csvName,\n      graph: chosenGraph,\n      var1: chosenVariables[0],\n      var2: chosenVariables[1],\n      var3: chosenVariables[2],\n      var4: chosenVariables[3],\n      var5: chosenVariables[4]\n    }).then(res => {\n      console.log(res.statusText);\n      console.log(res);\n      console.log(\"1\");\n\n      function sendId() {\n        return new Promise(resolve => {\n          lastId = res.data.rows[0].id;\n          console.log(lastId);\n          setLinkOfGraph(LinkOfGraph + lastId);\n          console.log(typeof LinkOfGraph);\n          console.log(LinkOfGraph);\n          console.log(res.data.rows[0].id);\n          console.log(\"2\");\n          resolve(LinkOfGraph);\n        });\n      }\n\n      async function sent() {\n        await sendId();\n        setIsFileSubmitted(false);\n        setIsFilePicked(false);\n        console.log(isInput);\n        setIsInput(false);\n        console.log(isInput);\n        console.log(\"3\");\n        setIsGraphDone(true);\n        console.log(\"graph done\");\n      }\n\n      sent();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isInput ? /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      name: \"file\",\n      className: \"btn btn-danger\",\n      accept: \".csv\",\n      onChange: changeHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), isFilePicked && isInput ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Filename: \", selectedFile.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Filetype: \", selectedFile.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Size in bytes: \", selectedFile.size]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"lastModifiedDate:\", ' ', selectedFile.lastModifiedDate.toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: handleSubmission,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), isFileSubmitted ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Variables:  \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 6\n        }, this), isHeaderPicked ? selectedHeaders.map((e, i) => /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          className: \"button-nonselectedvar button-spacing\",\n          onClick: ew => {\n            console.log(\"a\");\n            saveChosenVariables(e, ew);\n          },\n          children: e\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), console.log(chosenVariables)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Graphicons: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 6\n        }, this), typesGraphicons.map((e, i) => /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          className: \"button-spacing button-nonselected\",\n          onClick: ew => {\n            console.log(document.getElementsByClassName(\"button-selected\"));\n\n            if (ew.target.classList.contains(\"button-nonselected\")) {\n              ew.target.classList.remove(\"button-nonselected\");\n              ew.target.classList.add(\"button-selected\");\n            } else if (ew.target.classList.contains(\"button-selected\")) {\n              ew.target.classList.remove(\"button-selected\");\n              ew.target.classList.add(\"button-nonselected\");\n            }\n\n            chosenGraph = e;\n          },\n          children: e\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 8\n        }, this) // <Button key={e} variant=\"danger\" className={ chosenGrapha === e ?  \"button-selected\" : \"button-nonselected\" } onClick={() => {  chosenGraph=e; setChosenGraph(e); }}>{e}</Button>\n        )]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          type: \"submit\",\n          onClick: () => {\n            handleDatabase();\n          },\n          children: \"Napravi grafikon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), isGraphDone ?\n    /*#__PURE__*/\n    // 8 korak\n    _jsxDEV(_Fragment, {\n      children: [console.log(LinkOfGraph), console.log(\"4\"), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          className: \"responsive-iframe\",\n          src: LinkOfGraph,\n          title: \"graph\",\n          allowFullScreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 5\n      }, this), console.log(\"5\"), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: () => {\n            setIframeLink(true);\n          },\n          children: \"Create iframe adress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 5\n      }, this), iFrameLink ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"div-link\",\n            children: LinkOfGraph\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 7\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \" \"\n      }, void 0, false)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 10\n  }, this);\n} //logic\n\n\n_s(MyBody, \"b9Y08GP13jih93BWfLrssBGZlkE=\");\n\n_c = MyBody;\n\nconst Upload = () => {\n  _s2();\n\n  //1 korak\n  function MyVerticallyCenteredModal(props) {\n    return (\n      /*#__PURE__*/\n      // 3 korak\n      _jsxDEV(Modal, { ...props,\n        size: \"lg\",\n        \"aria-labelledby\": \"contained-modal-title-vcenter\",\n        centered: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            id: \"contained-modal-title-vcenter\",\n            children: \"d3.js grafikon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(MyBody, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: props.onHide,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 4\n      }, this)\n    );\n  } //end of steppper\n\n\n  const [modalShow, setModalShow] = useState(false);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"home\",\n      className: \"jumbotron\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Platforma za izradu grafikona\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Kreirajte neograni\\u010Deni broj grafikona iz .csv datoteka i ubacite ih u svoju web stranicu kroz iframe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          id: \"stvoriGraf\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: () => setModalShow(true),\n            children: \"Kreiraj svoj grafikon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(MyVerticallyCenteredModal, {\n            show: modalShow,\n            onHide: () => setModalShow(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 2\n    }, this)\n  }, void 0, false);\n};\n\n_s2(Upload, \"xuPPltV/3J92+XaNotdpXxySp+I=\");\n\n_c2 = Upload;\nexport default Upload;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MyBody\");\n$RefreshReg$(_c2, \"Upload\");","map":{"version":3,"sources":["C:/Users/alens/OneDrive/Radna površina/Novi materijali/diplomski react node sql/client/src/components/UploadGraph/Upload.jsx"],"names":["React","useState","axios","Modal","Button","MyBody","props","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","isFileSubmitted","setIsFileSubmitted","selectedHeaders","setSelectedHeaders","isHeaderPicked","setIsHeaderPicked","isGraphDone","setIsGraphDone","isInput","setIsInput","LinkOfGraph","setLinkOfGraph","process","env","REACT_APP_SRVR_URL","REACT_APP_SRVR_PORT","iFrameLink","setIframeLink","chosenGrapha","setChosenGraph","d","Date","chosenVariables","typesGraphicons","chosenGraph","lastId","changeHandler","event","target","files","console","log","handleSubmission","data","FormData","append","post","then","res","statusText","submit","file","reader","FileReader","onload","e","text","result","processCsv","readAsText","str","delim","slice","indexOf","split","saveChosenVariables","ew","push","classList","remove","add","splice","handleDatabase","csvName","getDate","getMonth","name","csvname","graph","var1","var2","var3","var4","var5","sendId","Promise","resolve","rows","id","sent","type","size","lastModifiedDate","toLocaleDateString","map","i","document","getElementsByClassName","contains","Upload","MyVerticallyCenteredModal","onHide","modalShow","setModalShow"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport './mystyle.css'; \r\n\r\n\r\n\r\n\r\n\r\nfunction MyBody(props) {\r\n\tconst [selectedFile, setSelectedFile] = useState();\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n\tconst [isFileSubmitted, setIsFileSubmitted] = useState(false);\r\n\tconst [selectedHeaders, setSelectedHeaders] = useState();\r\n\tconst [isHeaderPicked, setIsHeaderPicked] = useState(false);\r\n\tconst [isGraphDone, setIsGraphDone] = useState(false);\r\n\tconst [isInput, setIsInput] = useState(true);\r\n\tconst [LinkOfGraph, setLinkOfGraph] = useState(process.env.REACT_APP_SRVR_URL+ \":\" + process.env.REACT_APP_SRVR_PORT + \"/graph\");\r\n\tconst [iFrameLink, setIframeLink] = useState(false);\r\n\tconst [chosenGrapha, setChosenGraph] = useState();\r\n\r\n\r\n\r\n\r\n\tconst d = new Date();\r\n\tlet chosenVariables = [];\r\n\tlet typesGraphicons = ['Linijski grafikon', 'Histogram', 'Box plot', 'Scatter plot', 'Bar plot', 'Heat map'];\r\n\tlet chosenGraph = -1;\r\n\tlet lastId = \"\";\r\n\r\n\r\n\r\n\r\n\r\n\tconst changeHandler = (event) => {\r\n\t\tsetSelectedFile(event.target.files[0]);\r\n\t\tconsole.log(event.target.files[0]);\r\n\t\tsetIsFilePicked(true);\r\n\t};\r\n\t//uploading csv to server\r\n\tconst handleSubmission = () => {\r\n\t\tconsole.log(\"handleUpload started\");\r\n\t\tconst data = new FormData()\r\n\t\tdata.append('file', selectedFile)\r\n\t\taxios.post(process.env.REACT_APP_SRVR_URL+ \":\" + process.env.REACT_APP_SRVR_PORT + \"/upload\", data, {\r\n\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res.statusText);\r\n\t\t\t})\r\n\r\n\t\tsubmit();\r\n\t\tsetIsFileSubmitted(true);\r\n\t};\r\n\r\n\r\n\r\n\r\n\t//getHeaders from selectedfile csv\r\n\tconst submit = () => {\r\n\t\tconst file = selectedFile;\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.onload = function (e) {\r\n\t\t\tconst text = e.target.result;\r\n\t\t\tconsole.log(text);\r\n\t\t\tprocessCsv(text);\r\n\t\t}\r\n\r\n\t\treader.readAsText(file);\r\n\t}\r\n\r\n\tconst processCsv = (str, delim = \",\") => {\r\n\t\tsetSelectedHeaders(str.slice(0, str.indexOf('\\r\\n')).split(delim));\r\n\t\tsetIsHeaderPicked(true);\r\n\t\tconsole.log(selectedHeaders);\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tconst saveChosenVariables = (e,ew) => {\r\n\t\tif (chosenVariables.indexOf(e) === -1) {\r\n\t\t\tchosenVariables.push(e);\r\n\t\t\tew.target.classList.remove(\"button-nonselectedvar\");\r\n\t\t\tew.target.classList.add(\"button-selectedvar\");\r\n\t\t\tconsole.log(ew);\r\n\t\t\tconsole.log(chosenVariables);\r\n\t\t}\r\n\t\telse if (chosenVariables.indexOf(e) !== -1) {\r\n\t\t\tchosenVariables.splice(chosenVariables.indexOf(e), 1);\r\n\t\t\tew.target.classList.remove(\"button-selectedvar\");\r\n\t\t\tew.target.classList.add(\"button-nonselectedvar\");\r\n\t\t\tconsole.log(chosenVariables);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\t//Date.now() + '-' + file.originalname\r\n\t//putting csvfile name in database\r\n\tconst handleDatabase = () => {\r\n\t\tconsole.log(\"handleDB started\");\r\n\t\tlet csvName = d.getDate() + '-' + (d.getMonth() + 1) + '-' + selectedFile.name;\r\n\r\n\t\taxios.post(process.env.REACT_APP_SRVR_URL+ \":\" + process.env.REACT_APP_SRVR_PORT + \"/list\", {\r\n\r\n\t\t\tcsvname: csvName,\r\n\t\t\tgraph: chosenGraph,\r\n\t\t\tvar1: chosenVariables[0],\r\n\t\t\tvar2: chosenVariables[1],\r\n\t\t\tvar3: chosenVariables[2],\r\n\t\t\tvar4: chosenVariables[3],\r\n\t\t\tvar5: chosenVariables[4],\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res.statusText);\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tconsole.log(\"1\");\r\n\t\t\t\tfunction sendId() {\r\n\t\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\t\tlastId = res.data.rows[0].id;\r\n\t\t\t\t\t\tconsole.log(lastId);\r\n\t\t\t\t\t\tsetLinkOfGraph(LinkOfGraph + lastId);\r\n\t\t\t\t\t\tconsole.log(typeof LinkOfGraph);\r\n\t\t\t\t\t\tconsole.log(LinkOfGraph);\r\n\t\t\t\t\t\tconsole.log(res.data.rows[0].id);\r\n\t\t\t\t\t\tconsole.log(\"2\");\r\n\t\t\t\t\t\tresolve(LinkOfGraph);\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tasync function sent() {\r\n\t\t\t\t\tawait sendId();\r\n\t\t\t\t\tsetIsFileSubmitted(false);\r\n\t\t\t\t\tsetIsFilePicked(false);\r\n\t\t\t\t\tconsole.log(isInput);\r\n\t\t\t\t\tsetIsInput(false);\r\n\t\t\t\t\tconsole.log(isInput);\r\n\r\n\t\t\t\t\tconsole.log(\"3\");\r\n\t\t\t\t\tsetIsGraphDone(true);\r\n\r\n\t\t\t\t\tconsole.log(\"graph done\");\r\n\t\t\t\t}\r\n\t\t\t\tsent();\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t})\r\n\r\n\r\n\r\n\r\n\t}\r\n\treturn (<div>\r\n\t\t{isInput ? (<input type=\"file\" name=\"file\" className=\"btn btn-danger\" accept=\".csv\" onChange={changeHandler} />) : (<></>)}\r\n\t\t{/* 4 korak */}\r\n\t\t{(isFilePicked && isInput) ? (\r\n\t\t\t<>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<p>Filename: {selectedFile.name}</p>\r\n\t\t\t\t<p>Filetype: {selectedFile.type}</p>\r\n\t\t\t\t<p>Size in bytes: {selectedFile.size}</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tlastModifiedDate:{' '}\r\n\t\t\t\t\t{selectedFile.lastModifiedDate.toLocaleDateString()}\r\n\t\t\t\t</p>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button variant=\"danger\" onClick={handleSubmission} >Submit</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<hr/>\r\n\t\t\t</>\r\n\r\n\t\t) : (\r\n\t\t\t<></>)\r\n\t\t}\r\n\r\n\t\t{isFileSubmitted ? (\r\n\t\t\t<>\r\n\t\t\t\t{/* 6 korak */}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Variables:  </label>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisHeaderPicked ? (\r\n\t\t\t\t\t\t\tselectedHeaders.map((e, i) => (\r\n\t\t\t\t\t\t\t\t<Button variant=\"danger\" className=\"button-nonselectedvar button-spacing\"  key={i} onClick={(ew) => { console.log(\"a\"); saveChosenVariables(e,ew) }}>{e}</Button>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t) : (<></>)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{console.log(chosenVariables)}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>Graphicons: </label> \r\n\t\t\t\t\t{/* 7 korak */}\r\n\r\n\t\t\t\t\t{/* if (chosenVariables.indexOf(e) === -1) {\r\n\t\t\t\t\t\tchosenVariables.push(e);\r\n\t\t\t\t\t\tew.target.classList.remove(\"button-nonselected\");\r\n\t\t\t\t\t\tew.target.classList.add(\"button-selected\");\r\n\t\t\t\t\t\tconsole.log(ew);\r\n\t\t\t\t\t\tconsole.log(chosenVariables);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (chosenVariables.indexOf(e) !== -1) {\r\n\t\t\t\t\t\tchosenVariables.splice(chosenVariables.indexOf(e), 1); */}\r\n\r\n\t\t\t\t\t{typesGraphicons.map((e, i) => (\r\n\t\t\t\t\t\t <Button key={i} variant=\"danger\"  className=\"button-spacing button-nonselected\" onClick={(ew) => { \r\n\t\t\t\t\t\t\t \tconsole.log(document.getElementsByClassName(\"button-selected\"));\r\n\t\t\t\t\t\t\t\tif(ew.target.classList.contains(\"button-nonselected\")){\r\n\t\t\t\t\t\t\t\t\tew.target.classList.remove(\"button-nonselected\"); \r\n\t\t\t\t\t\t\t\t\tew.target.classList.add(\"button-selected\"); \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(ew.target.classList.contains(\"button-selected\")){\r\n\t\t\t\t\t\t\t\t\tew.target.classList.remove(\"button-selected\"); \r\n\t\t\t\t\t\t\t\t\tew.target.classList.add(\"button-nonselected\");  \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t chosenGraph=e;  }}>{e}</Button>\r\n\t\t\t\t\t\t// <Button key={e} variant=\"danger\" className={ chosenGrapha === e ?  \"button-selected\" : \"button-nonselected\" } onClick={() => {  chosenGraph=e; setChosenGraph(e); }}>{e}</Button>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button variant=\"danger\" type=\"submit\" onClick={() => { handleDatabase() }}>Napravi grafikon</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\r\n\t\t) : (<></>)}\r\n\r\n\t\t{isGraphDone ? (\r\n\t\t\t// 8 korak\r\n\t\t\t<>\r\n\r\n\t\t\t\t{console.log(LinkOfGraph)}\r\n\r\n\t\t\t\t{console.log(\"4\")}\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<iframe className=\"responsive-iframe\" src={LinkOfGraph} title=\"graph\" allowFullScreen={true} ></iframe>  \r\n\t\t\t\t\t{/* height=\"450\" width=\"800\r\n\t\t\t\t\t \t\" */}\r\n\t\t\t\t</div>\r\n\t\t\t\t{console.log(\"5\")}\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t<Button variant=\"danger\" onClick={()=>{setIframeLink(true)}}>Create iframe adress</Button></div>\r\n\t\t\t\t{iFrameLink ? (\r\n\t\t\t\t\t <>\t\r\n\t\t\t\t\t{/* //className=\"text-center\" */}\r\n\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<div className=\"div-link\">{LinkOfGraph}</div></div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (<> </>)}\r\n\t\t\t</>\r\n\t\t) : (<></>)}\r\n\r\n\t</div>\r\n\r\n\r\n\t);\r\n}\r\n\r\n\r\n//logic\r\nconst Upload = () => {\r\n\r\n\r\n\t//1 korak\r\n\r\n\r\n\tfunction MyVerticallyCenteredModal(props) {\r\n\r\n\t\treturn (\r\n\t\t\t// 3 korak\r\n\t\t\t<Modal\r\n\t\t\t\t{...props}\r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\t\tcentered\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t\td3.js grafikon\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\r\n\r\n\t\t\t\t\t<MyBody />\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Button variant=\"danger\" onClick={props.onHide}>Close</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\r\n\t\t);\r\n\t}\r\n\r\n\t//end of steppper\r\n\tconst [modalShow, setModalShow] = useState(false);\r\n\r\n\treturn (\r\n\r\n\t\t<>\r\n\t\t\r\n\r\n\t<div id=\"home\" className=\"jumbotron\" >\r\n        <h1>Platforma za izradu grafikona</h1>\r\n        <hr/>\r\n        <p>Kreirajte neograničeni broj grafikona iz .csv datoteka i ubacite ih u svoju web stranicu kroz iframe</p>\r\n        <br/>\r\n        <br/>\r\n       \r\n        <form>\r\n            <div className=\"input-group\" id=\"stvoriGraf\">\r\n                \r\n                  \r\n                   \r\n\t\t\t\t<Button variant=\"danger\" onClick={() => setModalShow(true)}>\r\n\t\t\t\t\t\t\t\tKreiraj svoj grafikon\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t<MyVerticallyCenteredModal\r\n\t\t\t\tshow={modalShow}\r\n\t\t\t\tonHide={() => setModalShow(false)}\r\n\t\t\t/>\r\n                \r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n\t\t\r\n\t\t</>\r\n\t)\r\n};\r\n\r\nexport default Upload;\r\n"]},"metadata":{},"sourceType":"module"}